<h1>Order <%= @order.id %></h1>
<p><strong>Status:</strong> <%= @order.status.humanize %></p>
<p><strong>Placed:</strong> <%= @order.created_at.to_s(:long) %></p>

<h2>Shipping Information</h2>
<p><strong>Name:</strong> <%= @order.full_name %></p>
<p><strong>Email:</strong> <%= @order.user&.email || "Guest" %></p>
<p><strong>Address:</strong> <%= @order.address %>, <%= @order.city %>, <%= @order.province&.name %>, <%= @order.postal %></p>

<h2>Order Items</h2>
<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Quantity</th>
      <th>Unit Price</th>
      <th>Line Total</th>
    </tr>
  </thead>
  <tbody>
    <% subtotal = 0 %>
    <% @order.order_items.each do |item| %>
      <% line_total = item.price_cents * item.quantity %>
      <% subtotal += line_total %>
      <tr>
        <td><%= item.product.name %></td>
        <td><%= item.quantity %></td>
        <td>$<%= '%.2f' % (item.price_cents.to_f / 100) %></td>
        <td>$<%= '%.2f' % (line_total.to_f / 100) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h3>Summary</h3>
<p><strong>Subtotal:</strong> $<%= '%.2f' % (subtotal.to_f / 100) %></p>
<p><strong>GST:</strong> $<%= '%.2f' % (@order.gst_cents.to_f / 100) %></p>
<p><strong>PST:</strong> $<%= '%.2f' % (@order.pst_cents.to_f / 100) %></p>
<p><strong>HST:</strong> $<%= '%.2f' % (@order.hst_cents.to_f / 100) %></p>
<p><strong>Total:</strong> $<%= '%.2f' % (@order.total_cents.to_f / 100) %></p>
