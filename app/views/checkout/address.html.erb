<h1>Checkout â€” Shipping & Billing Address</h1>

<%= form_with url: checkout_process_address_path, method: :post, local: true do |f| %>
  <div class="mb-3">
    <%= label_tag "address[full_name]", "Full Name", class: "form-label" %>
    <%= text_field_tag "address[full_name]",
        current_user&.full_name || session.dig(:checkout_address, "full_name") || "",
        class: "form-control",
        required: true %>
  </div>

  <div class="mb-3">
    <%= label_tag "address[email]", "Email", class: "form-label" %>
    <%= email_field_tag "address[email]",
        current_user&.email || session.dig(:checkout_address, "email") || "",
        class: "form-control",
        required: true %>
  </div>

  <div class="mb-3">
    <%= label_tag "address[address]", "Address", class: "form-label" %>
    <%= text_field_tag "address[address]",
        current_user&.address || session.dig(:checkout_address, "address") || "",
        class: "form-control",
        required: true %>
  </div>

  <div class="mb-3">
    <%= label_tag "address[city]", "City", class: "form-label" %>
    <%= text_field_tag "address[city]",
        current_user&.city || session.dig(:checkout_address, "city") || "",
        class: "form-control",
        required: true %>
  </div>

  <div class="mb-3">
    <%= label_tag "address[postal]", "Postal Code", class: "form-label" %>
    <%= text_field_tag "address[postal]",
        current_user&.postal || session.dig(:checkout_address, "postal") || "",
        class: "form-control",
        required: true %>
  </div>

  <div class="mb-3">
    <%= label_tag "address[province_id]", "Province", class: "form-label" %>
    <%= select_tag "address[province_id]",
        options_from_collection_for_select(@provinces, "id", "name", session.dig(:checkout_address, "province_id") || current_user&.province_id),
        class: "form-select",
        required: true %>
  </div>

  <%= submit_tag "Continue to Review", class: "btn btn-primary" %>
<% end %>
