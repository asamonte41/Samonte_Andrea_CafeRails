<h1>Checkout â€” Shipping & Billing Address</h1>

<%= form_with url: checkout_review_path, method: :post, local: true do |f| %>

  <div class="mb-3">
    <%= f.label :full_name, "Full Name", class: "form-label" %>
    <%= f.text_field :full_name,
          value: session[:checkout_address]&.dig("full_name") || current_user&.name,
          class: "form-control",
          required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :address, "Street Address", class: "form-label" %>
    <%= f.text_field :address,
          value: session[:checkout_address]&.dig("address") || current_user&.address,
          class: "form-control",
          required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :city, "City", class: "form-label" %>
    <%= f.text_field :city,
          value: session[:checkout_address]&.dig("city") || current_user&.city,
          class: "form-control",
          required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :postal, "Postal Code", class: "form-label" %>
    <%= f.text_field :postal,
          value: session[:checkout_address]&.dig("postal") || current_user&.postal,
          class: "form-control",
          required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :province_id, "Province", class: "form-label" %>
    <%= f.collection_select :province_id, @provinces, :id, :name,
          { include_blank: "Select Province" },
          { class: "form-select", required: true,
            selected: session[:checkout_address]&.dig("province_id") || current_user&.province_id } %>
  </div>

  <div class="mb-3">
    <%= f.submit "Continue to Review", class: "btn btn-primary" %>
  </div>

<% end %>
